#{extends 'main.html' /}
#{set title:'来坐坐吧' /}
<div class="container">
<div class="text-center"><h1 style="color:ccc;">学生列表</h1></div>
<table class="table table-striped table-bordered table-hover table-condensed" style="width:100%">
	<thead>
		<tr>
			<th>ID</th>
			<th>姓名</th>
			<th>年龄</th>
			<th>Email</th>
			<th>电话号码</th>
			<th>操作</th>
		</tr>
	</thead>
	<tbody>
	#{list items:studentList, as : 'student'}
		<tr>
			<td>${student.id}</td>
			<td>${student.sname}</td>
			<td>${student.sage}</td>
			<td>${student.email}</td>
			<td>${student.phoneno}</td>
			<td>
				<button class="btn btn-primary btn-sm" onclick="edit(${student.id})" data="${student.id}">编辑</button>
				<button class="btn btn-primary btn-sm" onclick="del(${student.id})" data="${student.id}">删除</button>
			</td>
		</tr>
	#{/list}
	</tbody>
</table>
</div>
<script type="text/javascript">
function edit(id){
	window.location.href = "@{Application.edit()}?id=" + id;
}
function del(id){
	if(!confirm("确定要删除吗？")){
		return;
	}
	$.get("@{Application.del()}", {"id":id}, function(data){
		alert(data.message);
		window.location.href = "@{Application.listStudent()}";
	});
}
</script>